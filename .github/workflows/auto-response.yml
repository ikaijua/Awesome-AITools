name: Auto Response

on:
  issues:
    types: [opened]
  pull_request:
    types: [opened]

permissions:
  contents: read
  issues: write
  pull-requests: write

jobs:
  auto-response:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Auto respond to new issue
        if: github.event_name == 'issues'
        uses: actions/github-script@v7
        with:
          script: |
            try {
              const issueAuthor = context.payload.issue.user.login;
              const issueBody = `
              Hi @${issueAuthor}! ğŸ‘‹

              Thank you for opening this issue! We appreciate your contribution to the Awesome AI Tools project.

              If this is a tool recommendation, please make sure to follow our [recommendation template](https://github.com/${context.repo.owner}/${context.repo.repo}/issues/233).

              We'll review your issue as soon as possible! ğŸš€
              `;
              await github.rest.issues.createComment({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.issue.number,
                body: issueBody
              });
              console.log('Issue response sent successfully');
            } catch (error) {
              console.error('Error responding to issue:', error);
            }

      - name: Auto respond to new PR
        if: github.event_name == 'pull_request'
        uses: actions/github-script@v7
        with:
          script: |
            try {
              const prAuthor = context.payload.pull_request.user.login;
              const prBody = `
              Hi @${prAuthor}! ğŸ‘‹

              Thank you for your pull request! We're excited to review your contribution.

              Please make sure to follow our [recommendation template](https://github.com/${context.repo.owner}/${context.repo.repo}/issues/233) when submitting a tool recommendation.

              We'll review your PR as soon as possible! ğŸš€
              `;

              // å¯¹äº PRï¼Œä½¿ç”¨ pull_request ç›¸å…³çš„ API æˆ–ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ issue ç¼–å·
              await github.rest.issues.createComment({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.payload.pull_request.number,
                body: prBody
              });
              console.log('PR response sent successfully');
            } catch (error) {
              console.error('Error responding to PR:', error);
              console.log('This may be due to PR coming from a fork with restricted permissions');
            }
